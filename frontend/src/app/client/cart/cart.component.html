<!-- Cart Section -->
<section class="cart-section">
    <div class="auto-container">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a routerLink="/"><span>Trang chủ</span></a>
                </li>
                <li class="breadcrumb-item">
                    <span>Giỏ hàng</span>
                </li>
            </ol>
        </div>
        <!-- Cart Outer -->
        <div class="cart-outer">
            <h3 class="text-center fw-bold text-dark mb-3">Giỏ hàng của bạn</h3>

            <!-- Kiểm tra giỏ hàng có trống không -->
            <div *ngIf="cartItems.length === 0;" class="empty-cart">
                <h4 class="text-center text-info mb-3">Giỏ hàng của bạn đang trống!</h4>
                <div class="text-center">
                    <a routerLink="/product">
                        <h5 class="mb-0"><i class="bi bi-arrow-return-left me-2"></i>Tiếp tục mua hàng</h5>
                    </a>                      
                </div>
            </div>
            
            <div *ngIf="cartItems.length !== 0" class="exist-cart">
                <div class="table-outer">
                    <table class="cart-table">
                        <thead class="cart-header">
                        <tr>
                            <th>Hình ảnh</th>
                            <th>Tên sản phẩm</th>
                            <th>Giá</th>
                            <th>Số Lượng</th>
                            <th>Tổng tiền</th>
                            <th>Thao tác</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of cartItems">
                            <td>
                                <img [src]="getImageUrl(item.image)" alt="{{item.name}}" class="img-fluid" style="max-width: 100px;">
                            </td>
                            <td><h4 class="prod-title">{{ item.name }}</h4></td>
                            <td><h4 class="prod-title">{{ item.price | currency: 'VND' }}</h4></td>
                            <td>
                            <div class="input-group input-group-sm d-flex justify-content-center">
                                <button class="btn btn-outline-secondary btn-sm" (click)="decreaseQuantity(item)">-</button>
                                <h4 class="prod-title"><input type="number" class="form-control form-control-sm text-center" [(ngModel)]="item.quantity" (input)="validateQuantity(item)"  min="1" style="width: 50px" /></h4>
                                <button class="btn btn-outline-secondary btn-sm" (click)="increaseQuantity(item)">+</button>
                            </div>
                            </td>
                            <td><h4 class="prod-title">{{ item.price * item.quantity | currency: 'VND' }}</h4></td>
                            <td>
                                <button (click)="removeFromCart(item.id)" type="button" class="btn btn-outline-danger"><i class="bi bi-trash3-fill"></i>Xóa</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    </div>
        
                    <div class="cart-options clearfix">
                    <div class="pull-right">
                        <button type="button" class="btn btn-danger" (click)="clearCart()"><i class="bi bi-cart-x-fill"></i> Xóa sạch giỏ</button>
                    </div>
                    </div>
        
                    <div class="clearfix">
                    <div class="pull-right col-4">
                        <ul class="totals-table">
                        <li class="bg-white">
                            <h3 class="text-center">Thông tin đơn hàng</h3>
                        </li>
                        <li class="clearfix total"><span class="col">Tổng tiền:</span><span class="col price">{{ getTotal() | currency: 'VND' }}</span></li>
                        <li class="text-right">
                            <a routerLink="/checkout" class="btn btn-info w-100">Thanh toán</a>
                        </li>
                        </ul>
                        <div class="text-center">
                            <a routerLink="/product">
                                <h5 class="mb-0"><i class="bi bi-arrow-return-left me-2"></i>Tiếp tục mua hàng</h5>
                            </a>                      
                        </div>
                    </div>
                    </div>
            </div>
            
        </div>
    </div>
</section>
<!-- End Cart Section -->
